'use strict';class Webcam{constructor(a,b){this.streaming=!1;this.width=a[0];this.height=a[1];this.onReadyCallback=b}async startStreaming(a=!0,b=!1){this.useVideo=a;this.useAudio=b;this.canvas=document.createElement("canvas");this.canvas.width=this.width;this.canvas.height=this.height;this.context=this.canvas.getContext("2d");this.videoElem=document.createElement("video");a={video:this.useVideo,audio:this.useAudio};try{this.stream=await navigator.mediaDevices.getUserMedia(a),this.videoElem.srcObject=
this.stream,this.videoElem.play(),this.streaming=!0,setTimeout(this.onReadyCallback,1E3)}catch(c){console.error("An error occurred: "+c),this.streaming=!1}}isReady(){return this.videoElem?Infinity==this.videoElem.duration:!1}takePicture(){this.context.save();this.context.scale(-1,1);this.context.drawImage(this.videoElem,0,0,-1*this.width,this.height);this.context.restore();return this.canvas.toDataURL("image/png")}purgeDisplay(){this.canvas.remove();this.videoElem.remove()}stop(){this.streaming&&
this.stream.getTracks().forEach(function(a){a.stop()});this.stream=null;this.streaming=!1}purge(){this.stop();this.canvas.remove();this.videoElem.remove()}};